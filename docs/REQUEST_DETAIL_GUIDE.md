# 请求详情功能说明

## 功能概述

请求详情功能允许用户查看每个捕获请求的详细信息，包括请求头、响应头、请求体和响应体等完整数据。

## 功能特性

### 1. 基本信息展示
- **时间**: 请求的时间戳
- **方法**: HTTP请求方法 (GET, POST, PUT, DELETE等)
- **URL**: 完整的请求URL
- **主机**: 请求的目标主机
- **协议**: 使用的协议 (HTTP/HTTPS)
- **状态码**: HTTP响应状态码
- **请求大小**: 请求体的大小 (自动格式化显示)
- **响应大小**: 响应体的大小 (自动格式化显示)
- **耗时**: 请求的响应时间 (毫秒)

### 2. 标签页式数据展示

#### 请求头标签页
- 以表格形式展示所有请求头
- 包含名称和值两列
- 支持多值头部的合并显示

#### 响应头标签页
- 以表格形式展示所有响应头
- 包含名称和值两列
- 显示服务器返回的所有头部信息

#### 请求体标签页
- 显示请求体内容
- 支持JSON格式化
- 提供复制功能
- 使用等宽字体显示，便于阅读

#### 响应体标签页
- 显示响应体内容
- 支持JSON格式化
- 提供复制功能
- 使用等宽字体显示，便于阅读

### 3. 交互功能

#### 复制功能
- 点击"复制"按钮可将请求体或响应体内容复制到剪贴板
- 支持成功/失败提示

#### JSON格式化
- 点击"格式化JSON"按钮可自动格式化JSON内容
- 自动检测是否为有效JSON
- 格式化失败时保持原内容不变

#### 标签页切换
- 支持在请求头、响应头、请求体、响应体之间自由切换
- 每个标签页独立显示对应数据

## 使用方法

1. 在抓包数据表格中点击任意一行
2. 系统会弹出请求详情对话框
3. 在对话框中可以查看基本信息和详细信息
4. 使用标签页切换查看不同类型的数据
5. 使用复制和格式化功能处理数据

## 技术实现

### 前端组件
- 使用Vue 3 Composition API
- Element Plus UI组件库
- 响应式数据绑定
- 标签页组件 (`el-tabs`)
- 表格组件 (`el-table`)
- 文本域组件 (`el-input`)

### 数据处理
- 自动格式化文件大小 (B/KB/MB)
- 时间格式化 (本地化显示)
- 头部数据转换为表格格式
- JSON格式化和验证
- 剪贴板操作

### 样式设计
- 90%宽度的对话框，提供充足的显示空间
- 等宽字体显示代码内容
- 清晰的表格布局
- 合理的间距和边距

## 数据来源

请求详情数据来源于Whistle代理服务器捕获的HTTP/HTTPS请求，包括：

- 请求基本信息 (URL, 方法, 时间等)
- 请求头信息
- 请求体内容
- 响应头信息
- 响应体内容
- 性能指标 (大小, 耗时等)

## 注意事项

1. 某些请求可能没有请求体或响应体
2. 大型响应体可能会影响显示性能
3. JSON格式化功能仅对有效的JSON内容有效
4. 复制功能需要浏览器支持Clipboard API

## 未来改进

1. 支持更多数据格式的格式化 (XML, YAML等)
2. 添加搜索和过滤功能
3. 支持数据导出功能
4. 添加语法高亮显示
5. 支持请求重放功能 